<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SCIHUM-25 Symposium Registration</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const departmentSelect = document.getElementById('department');
            const eventSelect = document.getElementById('event');
            const teamSizeSelect = document.getElementById('team_size');
            const member1Section = document.getElementById('member1_section');
            const member2Section = document.getElementById('member2_section');

            const eventsByDepartment = {
                'CSE': ['AI for Sustainability', 'Natural Language Processing'],
                'IT': ['Web3 and Blockchain', 'Open Source'],
                'AIML': ['AI in Healthcare', 'Ethical AI'],
                'AIDS': ['Data-Driven Economy', 'Economic Growth Predictions'],
                'CSBS': ['AI in Management', 'Marketing and AI'],
                'ECE': ['IoT in Smart Cities', 'Edge Computing'],
                'EEE': ['Smart Grids', 'EV Technologies'],
                'MECH': ['3D Printing', 'AI in Manufacturing']
            };

            function updateEventOptions() {
                const department = departmentSelect.value;
                eventSelect.innerHTML = '<option value="">-- Select an Event --</option>';
                if (eventsByDepartment[department]) {
                    eventsByDepartment[department].forEach(event => {
                        const option = document.createElement('option');
                        option.value = event;
                        option.textContent = event;
                        eventSelect.appendChild(option);
                    });
                }
            }

            function toggleMembers() {
                if (teamSizeSelect.value === 'Team of 2') {
                    member1Section.style.display = 'block';
                    member2Section.style.display = 'none';
                    document.getElementById('member1').required = true;
                    document.getElementById('member1_email').required = true;
                    document.getElementById('member2').required = false;
                    document.getElementById('member2_email').required = false;
                } else if (teamSizeSelect.value === 'Team of 3') {
                    member1Section.style.display = 'block';
                    member2Section.style.display = 'block';
                    document.getElementById('member1').required = true;
                    document.getElementById('member1_email').required = true;
                    document.getElementById('member2').required = true;
                    document.getElementById('member2_email').required = true;
                } else {
                    member1Section.style.display = 'none';
                    member2Section.style.display = 'none';
                    document.getElementById('member1').required = false;
                    document.getElementById('member1_email').required = false;
                    document.getElementById('member2').required = false;
                    document.getElementById('member2_email').required = false;
                }
            }

            departmentSelect.addEventListener('change', updateEventOptions);
            teamSizeSelect.addEventListener('change', toggleMembers);

            updateEventOptions();
            toggleMembers();
        });
    </script>
</head>
<body>
    <h1>SCIHUM-25 Symposium Registration</h1>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul>
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <form action="{{ url_for('submit') }}" method="POST">
        <label for="name">Name:</label>
        <input type="text" name="name" required><br>

        <label for="email">Email:</label>
        <input type="email" name="email" required><br>

        <label for="phone">Phone Number:</label>
        <input type="text" name="phone" required><br>

        <label for="department">Department:</label>
        <select name="department" id="department" required>
            <option value="">-- Select Department --</option>
            <option value="CSE">CSE</option>
            <option value="IT">IT</option>
            <option value="AIML">AIML</option>
            <option value="AIDS">AIDS</option>
            <option value="CSBS">CSBS</option>
            <option value="ECE">ECE</option>
            <option value="EEE">EEE</option>
            <option value="MECH">MECH</option>
        </select><br>

        <label for="team_size">Team Size:</label>
        <select name="team_size" id="team_size" required>
            <option value="">-- Select Team Size --</option>
            <option value="Individual">Individual</option>
            <option value="Team of 2">Team of 2</option>
            <option value="Team of 3">Team of 3</option>
        </select><br>

        <label for="event">Event:</label>
        <select name="event" id="event" required></select><br>

        <div id="member1_section">
            <label for="member1">Member 1 Name:</label>
            <input type="text" name="member1" id="member1"><br>

            <label for="member1_email">Member 1 Email:</label>
            <input type="email" name="member1_email" id="member1_email"><br>
        </div>

        <div id="member2_section">
            <label for="member2">Member 2 Name:</label>
            <input type="text" name="member2" id="member2"><br>

            <label for="member2_email">Member 2 Email:</label>
            <input type="email" name="member2_email" id="member2_email"><br>
        </div>

        <input type="submit" value="Register">
    </form>
</body>
</html>

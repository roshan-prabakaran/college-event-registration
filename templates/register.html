<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register - SCIHUM-25</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #004e92;
            --secondary-color: #000428;
            --accent-color: #0078D4;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
        }

        #bg-video {
            position: fixed;
            top: 0;
            left: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -1;
            object-fit: cover;
            width: 100%;
            height: 100%;
            opacity: 1;
        }

        header {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 1rem;
            text-align: center;
        }

        header h1 {
            font-size: 1.8rem;
            color: white;
        }

        section {
            padding: 1.5rem;
            margin: 2rem auto;
            background-color: rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
        }

        form label {
            display: block;
            margin-top: 1rem;
            font-size: 1rem;
            font-weight: bold;
            color: white;
        }

        form input, form select {
            width: 100%;
            padding: 0.6rem;
            margin-top: 0.3rem;
            font-size: 1rem;
            border-radius: 5px;
            border: none;
        }

        button[type="submit"] {
            width: 100%;
            padding: 0.8rem;
            margin-top: 1.5rem;
            font-size: 1.1rem;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s ease;
        }

        button[type="submit"]:hover {
            background-color: #005a9e;
        }

        @media (max-width:768px) {
            h1 {
                font-size: 1.5rem;
                color: white;
            }

            section {
                padding: 1rem;
                margin: 1rem auto;
            }

            form input, form select {
                padding: 0.5rem;
                font-size: 0.95rem;
            }

            button[type="submit"] {
                padding: 0.7rem;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>

    <video autoplay muted loop playsinline id="bg-video">
        <source src="{{ url_for('static', filename='background_registration.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <header>
        <h1>üìù Register for SCIHUM-25</h1>
    </header>

    <section>
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <p style="color: {{ 'lime' if category == 'success' else 'tomato' }}; font-weight: bold;">{{ message }}</p>
            {% endfor %}
          {% endif %}
        {% endwith %}

        <form action="/register" method="post">
            <label for="team_size">Team Size:</label>
            <select name="team_size" id="team_size">
                <option value="Team of 2">Team of 2</option>
                <option value="Team of 3">Team of 3</option>
            </select>

            <label for="department">Department:</label>
            <select name="department" id="department">
                <option value="Mathematics">Mathematics</option>
                <option value="Physics">Physics</option>
                <option value="Chemistry">Chemistry</option>
                <option value="English">English</option>
                <option value="General Events">General Events</option>
            </select>

            <label for="event">Event:</label>
            <select name="event" id="event"></select>

            <h3 style="color:white;">Team Details</h3>
            <label for="team_name">Team Name:</label>
            <input type="text" name="team_name" id="team_name" required>

            <label for="team_lead">Team Lead Name:</label>
            <input type="text" name="team_lead" id="team_lead" required>

            <label for="team_lead_email">Team Lead Email:</label>
            <input type="email" name="team_lead_email" id="team_lead_email" required>

            <h3 style="color:white;">Member Details</h3>
            <label for="member1">Member 1 Name:</label>
            <input type="text" name="member1" id="member1" required>

            <label for="member1_email">Member 1 Email:</label>
            <input type="email" name="member1_email" id="member1_email" required>

            <div id="member2-section" style="display: none;">
                <label for="member2">Member 2 Name:</label>
                <input type="text" name="member2" id="member2">

                <label for="member2_email">Member 2 Email:</label>
                <input type="email" name="member2_email" id="member2_email">
            </div>

            <label for="phone">Contact Number:</label>
            <input type="text" name="phone" id="phone" required>

            <label for="college">College Name:</label>
            <input type="text" name="college" id="college" required>

            <button type="submit">Submit</button>
        </form>
    </section>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const teamSizeSelect = document.getElementById('team_size');
            const member2Section = document.getElementById('member2-section');
            const departmentSelect = document.getElementById('department');
            const eventSelect = document.getElementById('event');

            function toggleMember2() {
                member2Section.style.display = teamSizeSelect.value === 'Team of 3' ? 'block' : 'none';
            }

            function updateEventOptions() {
                const department = departmentSelect.value;
                eventSelect.innerHTML = '';

                const eventMap = {
                    "Mathematics": {
                        "Paper Presentation": [
                            "Mathematics behind GPS Technology",
                            "Mathematics in Agriculture Technology",
                            "Mathematics - The Backbone of AI"
                        ],
                        "Poster Presentation": [
                            "Mathematics in Space Exploration",
                            "Mathematics in Software Development Life cycle"
                        ]
                    },
                    "Physics": {
                        "Paper Presentation": [
                            "Physics of Renewable Energy Sources",
                            "Scope & Future of EV in India",
                            "Biosensors for Environmental and Food Safety Monitoring"
                        ],
                        "Poster Presentation": [
                            "Working Model - Based on Physics Principles"
                        ]
                    },
                    "Chemistry": {
                        "Paper Presentation": [
                            "Sustainable Green Chemistry Approaches",
                            "Innovation in Plastic Recycling"
                        ],
                        "Poster Presentation": ["Smart and responsive materials"]
                    },
                    "English": {
                        "Teaser making": [
                            "Task-Based Language Teaching: A Communicative Paradigm",
                            "The Impact of Role-Play and Simulation on ESL Learners‚Äô Communication Skills",
                            "Storytelling as a Communicative Tool in ESL Classrooms"
                        ]
                    },
                    "General Events": [
                        "Decode the Memes",
                        "Sol-Vilayattu(Tamil)",
                        "quest2code"
                    ]
                };

                const options = eventMap[department];

                if (typeof options === "object" && !Array.isArray(options)) {
                    for (let mainEvent in options) {
                        const optGroup = document.createElement('optgroup');
                        optGroup.label = mainEvent;
                        options[mainEvent].forEach(subEvent => {
                            const option = document.createElement('option');
                            option.value = `${mainEvent} - ${subEvent}`;
                            option.textContent = subEvent;
                            optGroup.appendChild(option);
                        });
                        eventSelect.appendChild(optGroup);
                    }
                } else if (Array.isArray(options)) {
                    options.forEach(opt => {
                        const option = document.createElement('option');
                        option.value = opt;
                        option.textContent = opt;
                        eventSelect.appendChild(option);
                    });
                }
            }

            teamSizeSelect.addEventListener('change', toggleMember2);
            departmentSelect.addEventListener('change', updateEventOptions);

            toggleMember2();
            updateEventOptions();
        });
    </script>

</body>
</html>
